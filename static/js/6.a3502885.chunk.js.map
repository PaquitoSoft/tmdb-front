{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","components/tvshow-detail/tvshow-detail-view.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","CharacterMiniCard","character","imagePath","name","actorName","className","Media","path","type","sizes","ratio","alt","Title","Subtitle","SeasonMiniCard","season","tvShowId","posterPath","seasonNumber","airDate","episodesCount","to","VIEW_DATA_QUERY","SET_FAVORITE_TVSHOW_MUTATION","UNSET_FAVORITE_TVSHOW_MUTATION","TvShowDetailView","useParams","apiClient","useAppContext","useState","tvShow","setTvShow","useDataFetching","query","params","parseInt","isFetching","data","saveFavorite","isFavorite","variables","id","then","catch","error","console","_tvShow","getTvShowDetails","firstAirDate","overview","votesAverage","seasons","cast","Date","toDateString","ratingValue","size","RatingIcon","BIG","isActive","onClick","map"],"mappings":"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","file":"static/js/6.a3502885.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React, { useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\n\nimport { useAppContext } from '../app-context/app-context';\nimport useDataFetching from '../shared/use-data-fetching/use-data-fetching';\n\nimport Loader from '../shared/loader/loader';\nimport MediaImage from '../shared/media-image/media-image';\nimport MiniCard from '../shared/mini-card/mini-card';\nimport RatingIcon from '../shared/rating-icon/rating-icon';\nimport FavoriteIcon from '../shared/favorite-icon/favorite-icon';\n\nimport './tvshow-detail-view.css';\n\nfunction CharacterMiniCard({ character }) {\n\tconst {\n\t\timagePath,\n\t\tname,\n\t\tactorName\n\t} = character;\n\n\treturn (\n\t\t<MiniCard className=\"tvshow-detail__character-card\">\n\t\t\t<MiniCard.Media>\n\t\t\t\t<MediaImage \n\t\t\t\t\tpath={imagePath} \n\t\t\t\t\ttype=\"profile\"\n\t\t\t\t\tsizes=\"14vw\"\n\t\t\t\t\tratio={0.62}\n\t\t\t\t\talt={actorName}\n\t\t\t\t/>\n\t\t\t</MiniCard.Media>\n\t\t\t<MiniCard.Title>{actorName}</MiniCard.Title>\n\t\t\t<MiniCard.Subtitle>{name}</MiniCard.Subtitle>\n\t\t</MiniCard>\n\t);\n}\n\nfunction SeasonMiniCard({ season, tvShowId }) {\n\tconst {\n\t\tposterPath,\n\t\tseasonNumber,\n\t\tairDate,\n\t\tepisodesCount\n\t} = season;\n\n\treturn (\n\t\t<Link \n\t\t\tclassName=\"tvshow-detail__season-card\"\n\t\t\tto={`/tvshow/${tvShowId}/season/${seasonNumber}`}\n\t\t>\n\t\t\t<MiniCard>\n\t\t\t\t<MiniCard.Media>\n\t\t\t\t\t<MediaImage \n\t\t\t\t\t\tpath={posterPath} \n\t\t\t\t\t\ttype=\"poster\"\n\t\t\t\t\t\tsizes=\"14vw\"\n\t\t\t\t\t\tratio={0.59}\n\t\t\t\t\t\talt={`Season ${seasonNumber}`}\n\t\t\t\t\t/>\n\t\t\t\t</MiniCard.Media>\n\t\t\t\t<MiniCard.Title>{`Season ${seasonNumber}`}</MiniCard.Title>\n\t\t\t\t<MiniCard.Subtitle>{`(${airDate})`}</MiniCard.Subtitle>\n\t\t\t\t<MiniCard.Subtitle>{`${episodesCount} Episodes`}</MiniCard.Subtitle>\n\t\t\t</MiniCard>\n\t\t</Link>\n\t);\n}\n\nconst VIEW_DATA_QUERY = `\n\tquery TvShowDetails($tvShowId: Int!) {\n\t\tgetTvShowDetails(tvShowId: $tvShowId) {\n\t\t\tid\n\t\t\tname\n\t\t\tposterPath\n\t\t\tfirstAirDate\n\t\t\toverview\n\t\t\tvotesAverage\n\t\t\tisFavorite\n\t\t\tseasons {\n\t\t\t\tseasonNumber\n\t\t\t\tposterPath\n\t\t\t\tairDate\n\t\t\t\tepisodesCount\n\t\t\t}\n\t\t\tcast {\n\t\t\t\tid\n\t\t\t\timagePath\n\t\t\t\tname\n\t\t\t\tactorName\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst SET_FAVORITE_TVSHOW_MUTATION = `\n\tmutation SaveFavoriteTvShow($tvShowId: Int!) {\n\t\tsaveFavoriteTvShow(tvShowId: $tvShowId)\n\t}\n`;\n\nconst UNSET_FAVORITE_TVSHOW_MUTATION = `\n\tmutation RemoveFavoriteTvShow($tvShowId: Int!) {\n\t\tremoveFavoriteTvShow(tvShowId: $tvShowId)\n\t}\n`;\n\n\nexport default function TvShowDetailView() {\n\tconst { tvShowId } = useParams();\n\tconst { apiClient } = useAppContext();\n\tconst [tvShow, setTvShow] = useState();\n\tconst {\n\t\tisFetching,\n\t\tdata\n\t} = useDataFetching({\n\t\tquery: VIEW_DATA_QUERY,\n\t\tparams: { \n\t\t\ttvShowId: parseInt(tvShowId, 0)\n\t\t}\n\t});\n\n\tconst saveFavorite = ({ tvShow, isFavorite }) => {\n\t\tapiClient.query({ \n\t\t\tquery: isFavorite ? UNSET_FAVORITE_TVSHOW_MUTATION : SET_FAVORITE_TVSHOW_MUTATION, \n\t\t\tvariables: { tvShowId: tvShow.id} \n\t\t})\n\t\t.then(() => {\n\t\t\tsetTvShow({\n\t\t\t\t...tvShow,\n\t\t\t\tisFavorite: !isFavorite\n\t\t\t})\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error(`Error setting favorite value for TvShow ${tvShowId}`);\n\t\t});\n\t}\n\t\n\tif (isFetching) return <Loader />;\n\tif (!data) return null;\n\t\n\tconst _tvShow = tvShow || data.getTvShowDetails;\n\tconst {\n\t\tid,\n\t\tname,\n\t\tposterPath,\n\t\tfirstAirDate,\n\t\toverview,\n\t\tvotesAverage,\n\t\tisFavorite,\n\t\tseasons = [],\n\t\tcast = []\n\t} = _tvShow;\n\n\treturn (\n\t\t<section className=\"tvshow-detail\">\n\t\t\t<div className=\"tvshow-detail__main-info\">\n\t\t\t\t<section className=\"tvshow-detail__poster\">\n\t\t\t\t\t<MediaImage \n\t\t\t\t\t\tclassName=\"tvshow-detail__poster\" \n\t\t\t\t\t\tpath={posterPath} \n\t\t\t\t\t\ttype=\"poster\" \n\t\t\t\t\t\tsizes=\"41vw\"\n\t\t\t\t\t\tratio={0.68}\n\t\t\t\t\t\talt={name}\n\t\t\t\t\t/>\n\t\t\t\t</section>\n\t\t\t\t<section className=\"tvshow-detail__info-container\">\n\t\t\t\t\t<div className=\"tvshow-detail__title\">\n\t\t\t\t\t\t<h1 className=\"tvshow-detail__name\">{name}</h1>\n\t\t\t\t\t\t<span className=\"tvshow-detail__year\">({(new Date(firstAirDate).toDateString())})</span>\n\t\t\t\t\t\t<RatingIcon \n\t\t\t\t\t\t\tclassName=\"tvshow-detail__rating\"\n\t\t\t\t\t\t\tratingValue={votesAverage}\n\t\t\t\t\t\t\tsize={RatingIcon.sizes.BIG}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"tvshow-detail__overview-title\">\n\t\t\t\t\t\t<h2 className=\"tvshow-detail__overview-label\">Overview</h2>\n\t\t\t\t\t\t<FavoriteIcon \n\t\t\t\t\t\t\tisActive={isFavorite} \n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsaveFavorite({ isFavorite, tvShow: _tvShow });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"tvshow-detail__overview-description\">{overview}</p>\n\t\t\t\t</section>\n\t\t\t</div>\n\n\t\t\t<hr className=\"tvshow-detail__separator\"/>\n\n\t\t\t<section className=\"tvshow-detail__cast\">\n\t\t\t\t<h2 className=\"tvshow-detail__cast-title\">Tv Show Cast</h2>\n\t\t\t\t<div className=\"tvshow-detail__characters\">\n\t\t\t\t\t{cast.map(character => (\n\t\t\t\t\t\t<CharacterMiniCard key={character.id} character={character} />\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</section>\n\n\t\t\t<hr className=\"tvshow-detail__separator\"/>\n\n\t\t\t<section className=\"tvshow-detail__seasons-container\">\n\t\t\t\t<h2 className=\"tvshow-detail__seasons-title\">Seasons</h2>\n\t\t\t\t<div className=\"tvshow-detail__seasons-list\">\n\t\t\t\t\t{seasons.map(season => (\n\t\t\t\t\t\t<SeasonMiniCard key={season.seasonNumber} season={season} tvShowId={id} />\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</section>\n\t)\n}\n"],"sourceRoot":""}