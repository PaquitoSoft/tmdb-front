(this["webpackJsonptmdb-front"]=this["webpackJsonptmdb-front"]||[]).push([[0],{129:function(e,t,n){e.exports=n(275)},134:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},220:function(e,t){},222:function(e,t){},231:function(e,t){},233:function(e,t){},267:function(e,t){},268:function(e,t){},270:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=270},275:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(120),o=n.n(c),i=(n(134),n(16)),l=n(23);var u=n(75),s=n.n(u),m=n(123),f=n(12),d=n(5);n(140);var h=function(){return r.a.createElement("div",{className:"app-loader"},r.a.createElement("div",{className:"app-loader-icon"}))};function v(e){return Object(a.lazy)((function(){return new Promise((function(t,n){e().then((function(e){var n=e.default;t({default:function(){var e=Object(l.g)(),t=new URLSearchParams(Object(l.f)().search),c=function(e){var t=e.query,n=e.params,r=void 0===n?{}:n,c=Object(d.b)(),o=c.apiClient,i=c.setError,l=Object(a.useState)(!0),u=Object(f.a)(l,2),h=u[0],v=u[1],p=Object(a.useState)(),b=Object(f.a)(p,2),g=b[0],E=b[1],O=btoa(JSON.stringify(r));return Object(a.useEffect)((function(){var e=!1;return v(!0),o.sendQuery({query:t,variables:r}).then((function(t){if(e)return null;t.errors?i(t.errors):E(t.data),v(!1)})).catch(function(){var e=Object(m.a)(s.a.mark((function e(t){var n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.a)(t,1),a=n[0],e.next=3,a.stack.json();case 3:r=e.sent,c=r.errors,i(c[0]),v(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){return e=!0}}),[O]),{isFetching:h,data:g}}(n.buildDataFetchRequestData({urlParams:e,urlQueryString:t})),o=c.isFetching,i=c.data;return o?r.a.createElement(h,null):i?r.a.createElement(n,{data:i,urlParams:e,urlQueryString:t}):null}})})).catch(n)}))}))}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var g=r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),E=r.a.createElement("path",{d:"M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79zM1 10.5h3v2H1zM11 .55h2V3.5h-2zm8.04 2.495l1.408 1.407-1.79 1.79-1.407-1.408zm-1.8 15.115l1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5h3v2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-1 4h2v2.95h-2zm-7.45-.96l1.41 1.41 1.79-1.8-1.41-1.41z"}),O=function(e){var t=e.svgRef,n=e.title,a=b(e,["svgRef","title"]);return r.a.createElement("svg",p({width:24,height:24,viewBox:"0 0 24 24",ref:t},a),n?r.a.createElement("title",null,n):null,g,E)},y=r.a.forwardRef((function(e,t){return r.a.createElement(O,p({svgRef:t},e))}));n.p;function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _=r.a.createElement("g",{id:"Bounding_Box"},r.a.createElement("rect",{fill:"none",width:24,height:24})),C=r.a.createElement("g",{id:"Master"},r.a.createElement("g",null,r.a.createElement("path",{d:"M19.78,17.51c-2.47,0-6.57-1.33-8.68-5.43C8.77,7.57,10.6,3.6,11.63,2.01C6.27,2.2,1.98,6.59,1.98,12 c0,0.14,0.02,0.28,0.02,0.42C2.61,12.16,3.28,12,3.98,12c0,0,0,0,0,0c0-3.09,1.73-5.77,4.3-7.1C7.78,7.09,7.74,9.94,9.32,13 c1.57,3.04,4.18,4.95,6.8,5.86c-1.23,0.74-2.65,1.15-4.13,1.15c-0.5,0-1-0.05-1.48-0.14c-0.37,0.7-0.94,1.27-1.64,1.64 c0.98,0.32,2.03,0.5,3.11,0.5c3.5,0,6.58-1.8,8.37-4.52C20.18,17.5,19.98,17.51,19.78,17.51z"}),r.a.createElement("path",{d:"M7,16l-0.18,0C6.4,14.84,5.3,14,4,14c-1.66,0-3,1.34-3,3s1.34,3,3,3c0.62,0,2.49,0,3,0c1.1,0,2-0.9,2-2 C9,16.9,8.1,16,7,16z"}))),S=function(e){var t=e.svgRef,n=e.title,a=j(e,["svgRef","title"]);return r.a.createElement("svg",w({x:"0px",y:"0px",width:"24px",height:"24px",viewBox:"0 0 24 24",enableBackground:"new 0 0 24 24",xmlSpace:"preserve",ref:t},a),n?r.a.createElement("title",null,n):null,_,C)},N=r.a.forwardRef((function(e,t){return r.a.createElement(S,w({svgRef:t},e))}));n.p,n(141);function A(){var e=Object(d.b)().toggleThemeMode;return r.a.createElement("div",{className:"theme-mode-switch"},r.a.createElement(y,{className:"theme-mode-switch__icon"}),r.a.createElement("div",{className:"theme-mode-switch__control"},r.a.createElement("div",{className:"theme-mode-switch__button",onClick:e})),r.a.createElement(N,{className:"theme-mode-switch__icon"}))}var k=n(76),I=n(50);n(143);function x(e){var t=e.tvShow,n=e.onClick;return r.a.createElement(i.b,{className:"searcher__result",to:"/tvshow/".concat(t.id),onClick:n},r.a.createElement(I.a,null,r.a.createElement(I.a.Media,null,r.a.createElement(k.a,{path:t.backdropImagePath,type:"backdrop",sizes:"14vw",ratio:1.71,alt:t.name})),r.a.createElement(I.a.Title,{noMultiline:!0},t.name)))}var z="\n\tquery SearchTvShows($searchTerm: String!) {\n\t\tsearchTvShows(searchTerm: $searchTerm) {\n\t\t\tid\n\t\t\tname\n\t\t\tbackdropImagePath\n\t\t}\n\t}\n";function T(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(f.a)(o,2),l=i[0],u=i[1],s=Object(a.useState)([]),m=Object(f.a)(s,2),h=m[0],v=m[1],p=Object(d.b)().apiClient;return Object(a.useEffect)((function(){document.addEventListener("click",(function(e){e.target.closest(".searcher")||c(!1)}))}),[]),r.a.createElement("div",{className:"searcher"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l&&p.sendQuery({query:z,variables:{searchTerm:l}}).then((function(e){var t=e.data.searchTvShows;v(t)})).catch((function(e){console.error("Error searching for Tv Shows  with term '".concat(l,"'"),e)}))}},r.a.createElement("input",{className:"searcher__search-term",type:"text",name:"searchTerm",placeholder:"Type in your search term",onFocus:function(){return c(!0)},value:l,onChange:function(e){return u(e.target.value)}})),n&&h.length>0&&r.a.createElement("div",{className:"searcher__results"},h.map((function(e){return r.a.createElement(x,{key:e.id,tvShow:e,onClick:function(){return v([])}})}))))}n(144);function M(e){var t=e.error,n=Object(d.b)().setError;return console.error("Unexpected error:",t),r.a.createElement("div",{className:"error-modal"},r.a.createElement("div",{className:"error-modal__veil"}),r.a.createElement("div",{className:"error-modal__modal"},r.a.createElement("div",{className:"error-modal__head"}),r.a.createElement("div",{className:"error-modal__content"},r.a.createElement("p",null,"Ouch! It has been a totally unexpected error. Please try again in a minute.")),r.a.createElement("div",{className:"error-modal__footer"},r.a.createElement("button",{className:"error-modal__close-button",onClick:function(){return n(null)}},"Close"))))}n(145);function R(e){var t=e.children,n=Object(d.b)(),a=n.error,c=n.themeMode;return r.a.createElement("div",{className:"layout-app","data-thememode":c},r.a.createElement("header",{className:"layout-app__header"},r.a.createElement("section",{className:"layout-app__title-container"},r.a.createElement(i.b,{className:"layout-app__title",to:"/"},"THE MOVIE DATABASE"),r.a.createElement(A,null)),r.a.createElement("section",{className:"layout-app__search-container"},r.a.createElement(T,null))),r.a.createElement("main",{className:"layout-app__main"},t),a&&r.a.createElement(M,{error:a}))}function P(){var e=Object(l.f)().pathname;return Object(a.useEffect)((function(){window.scroll({top:0,left:0,behavior:"smooth"})}),[e]),null}n(146);var B=v((function(){return n.e(3).then(n.bind(null,286))})),U=v((function(){return n.e(4).then(n.bind(null,285))})),q=v((function(){return n.e(5).then(n.bind(null,287))})),D="/";D="/tmdb-front";var H=function(e){var t=e.apiClient,n=e.userId,c=e.imagesConfig;return r.a.createElement(d.a,{apiClient:t,userId:n,imagesConfig:c},r.a.createElement(i.a,{basename:D},r.a.createElement(a.Suspense,{fallback:r.a.createElement(h,null)},r.a.createElement(R,null,r.a.createElement(P,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/tvshow/:tvShowId/season/:seasonNumber"},r.a.createElement(q,null)),r.a.createElement(l.a,{path:"/tvshow/:tvShowId"},r.a.createElement(U,null)),r.a.createElement(l.a,{path:"/",exact:!0},r.a.createElement(B,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(125),Q=n(126),F=n(127),V=n(128),G=function(){function e(t){var n=t.apiUrl,a=t.userId;Object(L.a)(this,e),this.client=new F.Lokka({transport:new V.Transport(n,{headers:{userToken:a},credentials:!1})})}return Object(Q.a)(e,[{key:"sendQuery",value:function(e){var t=e.query,n=e.variables;return this.client.query(t,n).then((function(e){return{data:e}}))}},{key:"sendMutation",value:function(e){var t=e.mutation,n=e.variables;return this.client.mutate(t,n)}},{key:"createFragment",value:function(e){return this.client.createFragment(e)}}]),e}(),K="http://localhost:4000";K="https://tmdb-graphql-api.herokuapp.com";var J=function(){var e=localStorage.getItem("ut");return e||(e=btoa(Date.now()),localStorage.setItem("ut",e)),e}(),W=new G({apiUrl:K,userId:J});W.sendQuery({query:"\n\t\tquery {\n\t\t\tgetImagesConfiguration {\n\t\t\t\tbaseUrl\n\t\t\t\tbackdropSizes\n\t\t\t\tlogoSizes\n\t\t\t\tposterSizes\n\t\t\t\tprofileSizes\n\t\t\t\tstillSizes\n\t\t\t}\n\t\t}\n\t"}).then((function(e){var t=e.data.getImagesConfiguration;o.a.render(r.a.createElement(H,{apiClient:W,userId:J,imagesConfig:t}),document.getElementById("root"))})).catch((function(e){console.error("Error loading images configuration.",e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var a=n(12),r=n(0),c=n.n(r),o={LIGHT:"light",DARK:"dark"},i="tmk",l=c.a.createContext({apiClient:void 0,userId:void 0,imagesConfig:{},error:null,setError:function(){return!1},themeMode:void 0,toggleThemeMode:function(){return!1}});function u(e){var t=e.apiClient,n=e.userId,u=e.imagesConfig,s=e.children,m=Object(r.useState)(null),f=Object(a.a)(m,2),d=f[0],h=f[1],v=localStorage.getItem(i)||o.LIGHT,p=Object(r.useState)(v),b=Object(a.a)(p,2),g=b[0],E=b[1],O={apiClient:t,userId:n,imagesConfig:u,error:d,setError:h,themeMode:v,toggleThemeMode:function(){var e=g!==o.LIGHT?o.LIGHT:o.DARK;E(e),localStorage.setItem(i,e)}};return c.a.createElement(l.Provider,{value:O},s)}function s(){var e=Object(r.useContext)(l);if(!e)throw new Error("useAppContext must be used within an AppContext.Provider");return e}},50:function(e,t,n){"use strict";var a=n(0),r=n.n(a);n(142);function c(e){var t=e.children,n=e.className,a=void 0===n?"":n;return r.a.createElement("div",{className:"mini-card ".concat(a)},t)}c.Media=function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return r.a.createElement("span",{className:"mini-card__media ".concat(a)},t)},c.Title=function(e){var t=e.children,n=e.noMultiline,a=void 0!==n&&n,c=e.className,o=void 0===c?"":c;return r.a.createElement("span",{className:"mini-card__title ".concat(a?"mini-card__title--no-multiline":""," ").concat(o)},t)},c.Subtitle=function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return r.a.createElement("span",{className:"mini-card__subtitle ".concat(a)},t)},t.a=c},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(124),r=n(0),c=n.n(r),o=n(5);function i(e){var t=e.path,n=e.type,i=void 0===n?"poster":n,l=e.sizes,u=void 0===l?"":l,s=e.ratio,m=e.className,f=void 0===m?"":m,d=Object(a.a)(e,["path","type","sizes","ratio","className"]),h=Object(o.b)().imagesConfig,v=Object(r.useRef)(null),p=h["".concat(i,"Sizes")].filter((function(e){return/^w/.test(e)}));return Object(r.useEffect)((function(){if(!t){var e=v.current,n=e.clientHeight,a=e.clientWidth;s&&(n=Math.trunc(a/s)),v.current.src="https://picsum.photos/id/1025/".concat(a,"/").concat(n,"?grayscale")}}),[]),t&&(d.srcSet=p.map((function(e){return"".concat(h.baseUrl).concat(e).concat(t," ").concat(e.substr(1),"w")}))),c.a.createElement("img",Object.assign({ref:v,className:"media-image ".concat(f),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",sizes:u,style:{width:"100%"}},d))}}},[[129,1,2]]]);
//# sourceMappingURL=main.a7698d51.chunk.js.map