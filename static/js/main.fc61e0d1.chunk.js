(this["webpackJsonptmdb-front"]=this["webpackJsonptmdb-front"]||[]).push([[0],[,,function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return u}));var n=a(5),r=a(0),c=a.n(r),o={LIGHT:"light",DARK:"dark"},i="tmk",l=c.a.createContext({apiClient:void 0,userId:void 0,imagesConfig:{},error:null,setError:function(){return!1},themeMode:void 0,toggleThemeMode:function(){return!1}});function s(e){var t=e.apiClient,a=e.userId,s=e.imagesConfig,u=e.children,m=Object(r.useState)(null),f=Object(n.a)(m,2),d=f[0],h=f[1],v=localStorage.getItem(i)||o.LIGHT,p=Object(r.useState)(v),b=Object(n.a)(p,2),g=b[0],E=b[1],y={apiClient:t,userId:a,imagesConfig:s,error:d,setError:h,themeMode:v,toggleThemeMode:function(){var e=g!==o.LIGHT?o.LIGHT:o.DARK;E(e),localStorage.setItem(i,e)}};return c.a.createElement(l.Provider,{value:y},u)}function u(){var e=Object(r.useContext)(l);if(!e)throw new Error("useAppContext must be used within an AppContext.Provider");return e}},,,,,,,,,function(e,t,a){"use strict";var n=a(0),r=a.n(n);a(40);function c(e){var t=e.children,a=e.className,n=void 0===a?"":a;return r.a.createElement("div",{className:"mini-card ".concat(n)},t)}c.Media=function(e){var t=e.children,a=e.className,n=void 0===a?"":a;return r.a.createElement("span",{className:"mini-card__media ".concat(n)},t)},c.Title=function(e){var t=e.children,a=e.noMultiline,n=void 0!==a&&a,c=e.className,o=void 0===c?"":c;return r.a.createElement("span",{className:"mini-card__title ".concat(n?"mini-card__title--no-multiline":""," ").concat(o)},t)},c.Subtitle=function(e){var t=e.children,a=e.className,n=void 0===a?"":a;return r.a.createElement("span",{className:"mini-card__subtitle ".concat(n)},t)},t.a=c},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(25),r=a(0),c=a.n(r),o=a(2);function i(e){var t=e.path,a=e.type,i=void 0===a?"poster":a,l=e.sizes,s=void 0===l?"":l,u=e.ratio,m=e.className,f=void 0===m?"":m,d=Object(n.a)(e,["path","type","sizes","ratio","className"]),h=Object(o.b)().imagesConfig,v=Object(r.useRef)(null),p=h["".concat(i,"Sizes")].filter((function(e){return/^w/.test(e)}));return Object(r.useEffect)((function(){if(!t){var e=v.current,a=e.clientHeight,n=e.clientWidth;u&&(a=Math.trunc(n/u)),v.current.src="https://picsum.photos/id/1025/".concat(n,"/").concat(a,"?grayscale")}}),[]),t&&(d.srcSet=p.map((function(e){return"".concat(h.baseUrl).concat(e).concat(t," ").concat(e.substr(1),"w")}))),c.a.createElement("img",Object.assign({ref:v,className:"media-image ".concat(f),src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",sizes:s,style:{width:"100%"}},d))}},,,,,,,,,,function(e,t,a){e.exports=a(45)},,,,,function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),i=(a(31),a(7)),l=a(8);var s=a(15),u=a.n(s),m=a(5),f=a(2);a(38);var d=function(){return r.a.createElement("div",{className:"app-loader"},r.a.createElement("div",{className:"app-loader-icon"}))};function h(e){return Object(n.lazy)((function(){return new Promise((function(t,a){e().then((function(e){var a=e.default;t({default:function(){var e=Object(l.g)(),t=new URLSearchParams(Object(l.f)().search),c=function(e){var t=e.query,a=e.params,r=void 0===a?{}:a,c=Object(f.b)(),o=c.apiClient,i=c.setError,l=Object(n.useState)(!0),s=Object(m.a)(l,2),d=s[0],h=s[1],v=Object(n.useState)(),p=Object(m.a)(v,2),b=p[0],g=p[1],E=btoa(JSON.stringify(r));return Object(n.useEffect)((function(){var e=!1;return h(!0),o.sendQuery({query:t,variables:r}).then((function(t){if(e)return null;t.errors?i(t.errors):g(t.data),h(!1)})).catch((function(e){var t,a,n,r;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=Object(m.a)(e,1),a=t[0],c.next=3,u.a.awrap(a.stack.json());case 3:n=c.sent,r=n.errors,i(r[0]),h(!1);case 7:case"end":return c.stop()}}))})),function(){return e=!0}}),[E]),{isFetching:d,data:b}}(a.buildDataFetchRequestData({urlParams:e,urlQueryString:t})),o=c.isFetching,i=c.data;return o?r.a.createElement(d,null):i?r.a.createElement(a,{data:i,urlParams:e,urlQueryString:t}):null}})})).catch(a)}))}))}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var b=r.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}),g=r.a.createElement("path",{d:"M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79zM1 10.5h3v2H1zM11 .55h2V3.5h-2zm8.04 2.495l1.408 1.407-1.79 1.79-1.407-1.408zm-1.8 15.115l1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5h3v2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-1 4h2v2.95h-2zm-7.45-.96l1.41 1.41 1.79-1.8-1.41-1.41z"}),E=function(e){var t=e.svgRef,a=e.title,n=p(e,["svgRef","title"]);return r.a.createElement("svg",v({width:24,height:24,viewBox:"0 0 24 24",ref:t},n),a?r.a.createElement("title",null,a):null,b,g)},y=r.a.forwardRef((function(e,t){return r.a.createElement(E,v({svgRef:t},e))}));a.p;function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var j=r.a.createElement("g",{id:"Bounding_Box"},r.a.createElement("rect",{fill:"none",width:24,height:24})),_=r.a.createElement("g",{id:"Master"},r.a.createElement("g",null,r.a.createElement("path",{d:"M19.78,17.51c-2.47,0-6.57-1.33-8.68-5.43C8.77,7.57,10.6,3.6,11.63,2.01C6.27,2.2,1.98,6.59,1.98,12 c0,0.14,0.02,0.28,0.02,0.42C2.61,12.16,3.28,12,3.98,12c0,0,0,0,0,0c0-3.09,1.73-5.77,4.3-7.1C7.78,7.09,7.74,9.94,9.32,13 c1.57,3.04,4.18,4.95,6.8,5.86c-1.23,0.74-2.65,1.15-4.13,1.15c-0.5,0-1-0.05-1.48-0.14c-0.37,0.7-0.94,1.27-1.64,1.64 c0.98,0.32,2.03,0.5,3.11,0.5c3.5,0,6.58-1.8,8.37-4.52C20.18,17.5,19.98,17.51,19.78,17.51z"}),r.a.createElement("path",{d:"M7,16l-0.18,0C6.4,14.84,5.3,14,4,14c-1.66,0-3,1.34-3,3s1.34,3,3,3c0.62,0,2.49,0,3,0c1.1,0,2-0.9,2-2 C9,16.9,8.1,16,7,16z"}))),S=function(e){var t=e.svgRef,a=e.title,n=w(e,["svgRef","title"]);return r.a.createElement("svg",O({x:"0px",y:"0px",width:"24px",height:"24px",viewBox:"0 0 24 24",enableBackground:"new 0 0 24 24",xmlSpace:"preserve",ref:t},n),a?r.a.createElement("title",null,a):null,j,_)},C=r.a.forwardRef((function(e,t){return r.a.createElement(S,O({svgRef:t},e))}));a.p,a(39);function A(){var e=Object(f.b)().toggleThemeMode;return r.a.createElement("div",{className:"theme-mode-switch"},r.a.createElement(y,{className:"theme-mode-switch__icon"}),r.a.createElement("div",{className:"theme-mode-switch__control"},r.a.createElement("div",{className:"theme-mode-switch__button",onClick:e})),r.a.createElement(C,{className:"theme-mode-switch__icon"}))}var N=a(16),I=a(11);a(41);function k(e){var t=e.tvShow,a=e.onClick;return r.a.createElement(i.b,{className:"searcher__result",to:"/tvshow/".concat(t.id),onClick:a},r.a.createElement(I.a,null,r.a.createElement(I.a.Media,null,r.a.createElement(N.a,{path:t.backdropImagePath,type:"backdrop",sizes:"14vw",ratio:1.71,alt:t.name})),r.a.createElement(I.a.Title,{noMultiline:!0},t.name)))}var x="\n\tquery SearchTvShows($searchTerm: String!) {\n\t\tsearchTvShows(searchTerm: $searchTerm) {\n\t\t\tid\n\t\t\tname\n\t\t\tbackdropImagePath\n\t\t}\n\t}\n";function z(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(m.a)(o,2),l=i[0],s=i[1],u=Object(n.useState)([]),d=Object(m.a)(u,2),h=d[0],v=d[1],p=Object(f.b)().apiClient;return Object(n.useEffect)((function(){document.addEventListener("click",(function(e){e.target.closest(".searcher")||c(!1)}))}),[]),r.a.createElement("div",{className:"searcher"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l&&p.sendQuery({query:x,variables:{searchTerm:l}}).then((function(e){var t=e.data.searchTvShows;v(t)})).catch((function(e){console.error("Error searching for Tv Shows  with term '".concat(l,"'"),e)}))}},r.a.createElement("input",{className:"searcher__search-term",type:"text",name:"searchTerm",placeholder:"Type in your search term",onFocus:function(){return c(!0)},value:l,onChange:function(e){return s(e.target.value)}})),a&&h.length>0&&r.a.createElement("div",{className:"searcher__results"},h.map((function(e){return r.a.createElement(k,{key:e.id,tvShow:e,onClick:function(){return v([])}})}))))}a(42);function T(e){var t=e.error,a=Object(f.b)().setError;return console.error("App unexpected error:",t),r.a.createElement("div",{className:"error-modal"},r.a.createElement("div",{className:"error-modal__veil"}),r.a.createElement("div",{className:"error-modal__modal"},r.a.createElement("div",{className:"error-modal__head"}),r.a.createElement("div",{className:"error-modal__content"},r.a.createElement("p",null,"Ouch! It has been a totally unexpected error. Please try again in a minute.")),r.a.createElement("div",{className:"error-modal__footer"},r.a.createElement("button",{className:"error-modal__close-button",onClick:function(){return a(null)}},"Close"))))}a(43);function M(e){var t=e.children,a=Object(f.b)(),n=a.error,c=a.themeMode;return r.a.createElement("div",{className:"layout-app","data-thememode":c},r.a.createElement("header",{className:"layout-app__header"},r.a.createElement("section",{className:"layout-app__title-container"},r.a.createElement(i.b,{className:"layout-app__title",to:"/"},"THE MOVIE DATABASE"),r.a.createElement(A,null)),r.a.createElement("section",{className:"layout-app__search-container"},r.a.createElement(z,null))),r.a.createElement("main",{className:"layout-app__main"},t),n&&r.a.createElement(T,{error:n}))}function R(){var e=Object(l.f)().pathname;return Object(n.useEffect)((function(){window.scroll({top:0,left:0,behavior:"smooth"})}),[e]),null}a(44);var P=h((function(){return a.e(3).then(a.bind(null,56))})),q=h((function(){return a.e(4).then(a.bind(null,55))})),B=h((function(){return a.e(5).then(a.bind(null,57))})),H="/";H="/tmdb-front";var Q=function(e){var t=e.apiClient,a=e.userId,c=e.imagesConfig;return r.a.createElement(f.a,{apiClient:t,userId:a,imagesConfig:c},r.a.createElement(i.a,{basename:H},r.a.createElement(n.Suspense,{fallback:r.a.createElement(d,null)},r.a.createElement(M,null,r.a.createElement(R,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/tvshow/:tvShowId/season/:seasonNumber"},r.a.createElement(B,null)),r.a.createElement(l.a,{path:"/tvshow/:tvShowId"},r.a.createElement(q,null)),r.a.createElement(l.a,{path:"/",exact:!0},r.a.createElement(P,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(22),D=a(23),V=a(24),F=function(){function e(t){var a=t.apiUrl,n=t.userId;Object(U.a)(this,e),this.client=new V.a({url:a,interceptors:[],headers:{userToken:n},onStart:function(e){},onEnd:function(e){},omitEmptyVariables:!1})}return Object(D.a)(e,[{key:"sendQuery",value:function(e){var t=e.query,a=e.variables;return console.log({query:t,variables:a}),this.client.query({query:t,variables:a})}},{key:"sendMutation",value:function(e){var t=e.mutation,a=e.variables;return this.client.query({query:t,variables:a})}},{key:"createFragment",value:function(e){return this.client.createFragment(e)}}]),e}(),L="http://localhost:4000";L="https://tmdb-graphql-api.herokuapp.com";var G=function(){var e=localStorage.getItem("ut");return e||(e=btoa(Date.now()),localStorage.setItem("ut",e)),e}(),K=new F({apiUrl:L,userId:G});K.sendQuery({query:"\n\t\tquery {\n\t\t\tgetImagesConfiguration {\n\t\t\t\tbaseUrl\n\t\t\t\tbackdropSizes\n\t\t\t\tlogoSizes\n\t\t\t\tposterSizes\n\t\t\t\tprofileSizes\n\t\t\t\tstillSizes\n\t\t\t}\n\t\t}\n\t"}).then((function(e){var t=e.data.getImagesConfiguration;o.a.render(r.a.createElement(Q,{apiClient:K,userId:G,imagesConfig:t}),document.getElementById("root"))})).catch((function(e){console.error("Error loading images configuration.",e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[26,1,2]]]);
//# sourceMappingURL=main.fc61e0d1.chunk.js.map