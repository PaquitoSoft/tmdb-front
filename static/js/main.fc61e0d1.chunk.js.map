{"version":3,"sources":["components/app-context/app-context.js","components/shared/mini-card/mini-card.js","components/shared/media-image/media-image.js","components/shared/loader/loader.js","plugins/lazy-view-builder.js","components/shared/use-query-string/use-query-string.js","components/shared/use-data-fetching/use-data-fetching.js","components/layout/theme-mode-switch/light-mode-icon-24px.svg","components/layout/theme-mode-switch/dark-mode-icon-24px.svg","components/layout/theme-mode-switch/theme-mode-switch.js","components/layout/searcher/searcher.js","components/shared/error-modal/error-modal.js","components/layout/layout-app.js","components/shared/scroll-to-top/scroll-to-top.js","App.js","serviceWorker.js","plugins/api-client.js","index.js"],"names":["THEME_MODES","LIGHT","DARK","STORAGE_THEME_MODE_KEY","AppContext","React","createContext","apiClient","undefined","userId","imagesConfig","error","setError","themeMode","toggleThemeMode","AppProvider","children","useState","initialThemeMode","localStorage","getItem","setThemeMode","providerInitialValue","newThemeMode","setItem","Provider","value","useAppContext","context","useContext","Error","MiniCard","className","Media","Title","noMultiline","Subtitle","MediaImage","path","type","sizes","ratio","rest","$img","useRef","configSizes","filter","size","test","useEffect","current","clientHeight","clientWidth","Math","trunc","src","srcSet","map","baseUrl","substr","ref","style","width","buildLazyView","viewComponentLoader","lazy","Promise","resolve","reject","then","Component","default","urlParams","useParams","urlQueryString","URLSearchParams","useLocation","search","query","params","isFetching","setIsFetching","data","setData","paramsHash","btoa","JSON","stringify","ignore","sendQuery","variables","result","errors","catch","a","async","stack","json","useDataFetching","buildDataFetchRequestData","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","fill","d","_ref","svgRef","title","props","height","viewBox","ForwardRef","forwardRef","id","x","y","enableBackground","xmlSpace","ThemModeSwitch","onClick","SearchResult","tvShow","to","backdropImagePath","alt","name","SEARCH_QUERY","Searcher","hasFocus","setFocus","searchTerm","setSearchTerm","searchResults","setSearchResults","document","addEventListener","event","closest","onSubmit","preventDefault","results","searchTvShows","console","placeholder","onFocus","onChange","ErrorModal","LayoutApp","data-thememode","ScrollToTop","pathname","window","scroll","top","left","behavior","HomeView","TvShowDetailView","SeasonDetailView","basename","App","fallback","exact","Boolean","location","hostname","match","ApiClient","apiUrl","client","FetchQL","url","interceptors","headers","userToken","onStart","requestQueueLength","onEnd","omitEmptyVariables","log","mutation","fragmentDefinition","createFragment","API_URL","Date","now","getUserId","getImagesConfiguration","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fc61e0d1.chunk.js","sourcesContent":["import React, { useContext, useState } from 'react';\r\n\r\nexport const THEME_MODES = {\r\n\tLIGHT: 'light',\r\n\tDARK: 'dark'\r\n}\r\n\r\nconst STORAGE_THEME_MODE_KEY = 'tmk';\r\n\r\nconst AppContext = React.createContext({\r\n\tapiClient: undefined,\r\n\tuserId: undefined,\r\n\timagesConfig: {},\r\n\terror: null,\r\n\tsetError: () => false,\r\n\tthemeMode: undefined,\r\n\ttoggleThemeMode: () => false\r\n});\r\n\r\nexport function AppProvider({ apiClient, userId, imagesConfig, children } ) {\r\n\tconst [error, setError] = useState(null);\r\n\tconst initialThemeMode = localStorage.getItem(STORAGE_THEME_MODE_KEY) || THEME_MODES.LIGHT;\r\n\tconst [themeMode, setThemeMode] = useState(initialThemeMode);\r\n\tconst providerInitialValue = {\r\n\t\tapiClient, \r\n\t\tuserId, \r\n\t\timagesConfig, \r\n\t\terror, \r\n\t\tsetError,\r\n\t\tthemeMode: initialThemeMode,\r\n\t\ttoggleThemeMode: () => {\r\n\t\t\tconst newThemeMode = themeMode !== THEME_MODES.LIGHT ? THEME_MODES.LIGHT : THEME_MODES.DARK;\r\n\t\t\tsetThemeMode(newThemeMode);\r\n\t\t\tlocalStorage.setItem(STORAGE_THEME_MODE_KEY, newThemeMode);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<AppContext.Provider value={providerInitialValue}>\r\n\t\t\t{children}\r\n\t\t</AppContext.Provider>\r\n\t);\r\n}\r\n\r\nexport function useAppContext() {\r\n\tconst context = useContext(AppContext);\r\n\tif (!context) {\r\n\t\tthrow new Error('useAppContext must be used within an AppContext.Provider')\r\n\t}\r\n\treturn context;\r\n}\r\n","import React from 'react';\r\n\r\nimport './mini-card.css';\r\n\r\nconst Media = ({ children, className = '' }) => \r\n\t(<span className={`mini-card__media ${className}`}>{children}</span>);\r\nconst Title = ({ children, noMultiline = false, className = '' }) => \r\n\t(<span className={`mini-card__title ${noMultiline ? 'mini-card__title--no-multiline' : ''} ${className}`}>{children}</span>);\r\nconst Subtitle = ({ children, className = '' }) => \r\n\t(<span className={`mini-card__subtitle ${className}`}>{children}</span>);\r\n\r\nfunction MiniCard({ children, className = '' }) {\r\n\treturn (\r\n\t\t<div className={`mini-card ${className}`}>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n\t\r\n}\r\n\r\nMiniCard.Media = Media;\r\nMiniCard.Title = Title;\r\nMiniCard.Subtitle = Subtitle;\r\n\r\nexport default MiniCard;\r\n","import React, { useRef, useEffect } from 'react';\r\nimport { useAppContext } from '../../app-context/app-context';\r\n\r\n/*\r\n\t*sizes* attribute is to tell the browser how much width the image will use\r\n\tfrom the total available\r\n\t(https://web.dev/use-srcset-to-automatically-choose-the-right-image/#what-about-the-display-size-of-the-image)\r\n*/\r\nexport default function MediaImage({ \r\n\tpath, \r\n\ttype = 'poster', \r\n\tsizes = '', \r\n\tratio,\r\n\tclassName = '', \r\n\t...rest \r\n}) {\r\n\tconst { imagesConfig } = useAppContext();\r\n\tconst $img = useRef(null);\r\n\tconst configSizes = imagesConfig[`${type}Sizes`].filter(size => /^w/.test(size));\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (!path) {\r\n\t\t\tlet { clientHeight, clientWidth } = $img.current;\r\n\t\t\tif (ratio) clientHeight = Math.trunc(clientWidth / ratio);\r\n\t\t\t$img.current.src = `https://picsum.photos/id/1025/${clientWidth}/${clientHeight}?grayscale`;;\r\n\t\t}\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tif (path) {\r\n\t\trest.srcSet = configSizes.map(size => (\r\n\t\t\t`${imagesConfig.baseUrl}${size}${path} ${size.substr(1)}w`\r\n\t\t));\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t// eslint-disable-next-line jsx-a11y/alt-text\r\n\t\t<img \r\n\t\t\tref={$img}\r\n\t\t\tclassName={`media-image ${className}`}\r\n\t\t\tsrc=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\"\r\n\t\t\tsizes={sizes}\r\n\t\t\tstyle={{ width: '100%' }}\r\n\t\t\t{...rest} />\r\n\t);\r\n\r\n}\r\n","import React from 'react';\r\n\r\nimport './loader.css';\r\n\r\nexport default () => (\r\n\t<div className=\"app-loader\">\r\n\t\t<div className=\"app-loader-icon\"></div>\r\n\t</div>\r\n);\r\n","import React, { lazy } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport useQueryString from '../components/shared/use-query-string/use-query-string';\r\nimport useDataFetching from '../components/shared/use-data-fetching/use-data-fetching';\r\n\r\nimport Loader from '../components/shared/loader/loader';\r\n\r\nexport default function buildLazyView(viewComponentLoader) {\r\n\treturn lazy(() => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tviewComponentLoader()\r\n\t\t\t.then(({ default: Component}) => {\r\n\t\t\t\tfunction LazyView() {\r\n\t\t\t\t\tconst urlParams = useParams();\r\n\t\t\t\t\tconst urlQueryString = useQueryString();\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tisFetching,\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t} = useDataFetching(\r\n\t\t\t\t\t\tComponent.buildDataFetchRequestData({\r\n\t\t\t\t\t\t\turlParams,\r\n\t\t\t\t\t\t\turlQueryString\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (isFetching) return <Loader />;\r\n\t\t\t\t\tif (!data) return null;\r\n\t\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Component \r\n\t\t\t\t\t\t\tdata={data} \r\n\t\t\t\t\t\t\turlParams={urlParams}\r\n\t\t\t\t\t\t\turlQueryString={urlQueryString}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tresolve({ 'default': LazyView });\r\n\t\t\t})\r\n\t\t\t.catch(reject);\r\n\t\t});\r\n\t});\r\n}\r\n","import { useLocation } from 'react-router-dom';\r\n\r\nexport default function useQueryString() {\r\n\treturn new URLSearchParams(useLocation().search);\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { useAppContext } from '../../app-context/app-context';\r\n\r\nexport default function useDataFetching({\r\n\tquery, params = {}\r\n}) {\r\n\tconst { apiClient, setError } = useAppContext();\r\n\tconst [isFetching, setIsFetching] = useState(true);\r\n\tconst [data, setData] = useState();\r\n\tconst paramsHash = btoa(JSON.stringify(params));\r\n\t\r\n\tuseEffect(() => {\r\n\t\tlet ignore = false;\r\n\t\tsetIsFetching(true);\r\n\t\tapiClient.sendQuery({ query, variables: params })\r\n\t\t.then(result => {\r\n\t\t\tif (ignore) return null;\r\n\r\n\t\t\tif (result.errors) {\r\n\t\t\t\tsetError(result.errors);\r\n\t\t\t} else {\r\n\t\t\t\tsetData(result.data);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsetIsFetching(false);\r\n\t\t})\r\n\t\t.catch(async ([error]) => {\r\n\t\t\tconst { errors } = await error.stack.json();\r\n\t\t\tsetError(errors[0]);\r\n\t\t\tsetIsFetching(false);\r\n\t\t});\r\n\r\n\t\treturn () => ignore = true;\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, [paramsHash]);\r\n\t\r\n\treturn {\r\n\t\tisFetching,\r\n\t\tdata\r\n\t};\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79zM1 10.5h3v2H1zM11 .55h2V3.5h-2zm8.04 2.495l1.408 1.407-1.79 1.79-1.407-1.408zm-1.8 15.115l1.79 1.8 1.41-1.41-1.8-1.79zM20 10.5h3v2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm-1 4h2v2.95h-2zm-7.45-.96l1.41 1.41 1.79-1.8-1.41-1.41z\"\n});\n\nvar SvgLightModeIcon24Px = function SvgLightModeIcon24Px(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLightModeIcon24Px, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/light-mode-icon-24px.9b2d2e3d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Bounding_Box\"\n}, React.createElement(\"rect\", {\n  fill: \"none\",\n  width: 24,\n  height: 24\n}));\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  id: \"Master\"\n}, React.createElement(\"g\", null, React.createElement(\"path\", {\n  d: \"M19.78,17.51c-2.47,0-6.57-1.33-8.68-5.43C8.77,7.57,10.6,3.6,11.63,2.01C6.27,2.2,1.98,6.59,1.98,12 c0,0.14,0.02,0.28,0.02,0.42C2.61,12.16,3.28,12,3.98,12c0,0,0,0,0,0c0-3.09,1.73-5.77,4.3-7.1C7.78,7.09,7.74,9.94,9.32,13 c1.57,3.04,4.18,4.95,6.8,5.86c-1.23,0.74-2.65,1.15-4.13,1.15c-0.5,0-1-0.05-1.48-0.14c-0.37,0.7-0.94,1.27-1.64,1.64 c0.98,0.32,2.03,0.5,3.11,0.5c3.5,0,6.58-1.8,8.37-4.52C20.18,17.5,19.98,17.51,19.78,17.51z\"\n}), React.createElement(\"path\", {\n  d: \"M7,16l-0.18,0C6.4,14.84,5.3,14,4,14c-1.66,0-3,1.34-3,3s1.34,3,3,3c0.62,0,2.49,0,3,0c1.1,0,2-0.9,2-2 C9,16.9,8.1,16,7,16z\"\n})));\n\nvar SvgDarkModeIcon24Px = function SvgDarkModeIcon24Px(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    enableBackground: \"new 0 0 24 24\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDarkModeIcon24Px, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dark-mode-icon-24px.f9ab69b0.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\n\r\nimport { useAppContext } from '../../app-context/app-context';\r\n\r\nimport { ReactComponent as LightModeIcon} from './light-mode-icon-24px.svg';\r\nimport { ReactComponent as DarkModeIcon} from './dark-mode-icon-24px.svg';\r\nimport './theme-mode-switch.css';\r\n\r\nexport default function ThemModeSwitch() {\r\n\tconst { toggleThemeMode } = useAppContext();\r\n\t\r\n\treturn (\r\n\t\t<div className=\"theme-mode-switch\">\r\n\t\t\t<LightModeIcon className=\"theme-mode-switch__icon\" />\r\n\t\t\t<div className=\"theme-mode-switch__control\">\r\n\t\t\t\t<div \r\n\t\t\t\t\tclassName=\"theme-mode-switch__button\"\r\n\t\t\t\t\tonClick={toggleThemeMode}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<DarkModeIcon className=\"theme-mode-switch__icon\" />\r\n\t\t</div>\r\n\t)\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useAppContext } from '../../app-context/app-context';\r\nimport MediaImage from '../../shared/media-image/media-image';\r\nimport MiniCard from '../../shared/mini-card/mini-card';\r\n\r\nimport './searcher.css';\r\n\r\nfunction SearchResult({ tvShow, onClick }) {\r\n\treturn (\r\n\t\t<Link \r\n\t\t\tclassName=\"searcher__result\" \r\n\t\t\tto={`/tvshow/${tvShow.id}`} \r\n\t\t\tonClick={onClick}\r\n\t\t>\r\n\t\t\t<MiniCard>\r\n\t\t\t\t<MiniCard.Media>\r\n\t\t\t\t\t<MediaImage \r\n\t\t\t\t\t\tpath={tvShow.backdropImagePath} \r\n\t\t\t\t\t\ttype=\"backdrop\"\r\n\t\t\t\t\t\tsizes=\"14vw\"\r\n\t\t\t\t\t\tratio={1.71}\r\n\t\t\t\t\t\talt={tvShow.name}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MiniCard.Media>\r\n\t\t\t\t<MiniCard.Title noMultiline>{tvShow.name}</MiniCard.Title>\r\n\t\t\t</MiniCard>\r\n\t\t</Link>\r\n\t);\r\n}\r\n\r\nconst SEARCH_QUERY = `\r\n\tquery SearchTvShows($searchTerm: String!) {\r\n\t\tsearchTvShows(searchTerm: $searchTerm) {\r\n\t\t\tid\r\n\t\t\tname\r\n\t\t\tbackdropImagePath\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nexport default function Searcher() {\r\n\tconst [hasFocus, setFocus] = useState(false);\r\n\tconst [searchTerm, setSearchTerm] = useState('');\r\n\tconst [searchResults, setSearchResults] = useState([]);\r\n\tconst { apiClient } = useAppContext();\r\n\r\n\tconst onSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif (searchTerm) {\r\n\t\t\tapiClient.sendQuery({ \r\n\t\t\t\tquery: SEARCH_QUERY,\r\n\t\t\t\tvariables: { searchTerm } \r\n\t\t\t})\r\n\t\t\t.then(({ data: { searchTvShows: results} }) => {\r\n\t\t\t\tsetSearchResults(results);\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.error(`Error searching for Tv Shows  with term '${searchTerm}'`, error);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.addEventListener('click', event => {\r\n\t\t\tconst $searcher = event.target.closest('.searcher');\r\n\t\t\tif (!$searcher) {\r\n\t\t\t\tsetFocus(false);\r\n\t\t\t}\r\n\t\t});\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"searcher\">\r\n\t\t\t<form onSubmit={onSubmit}>\r\n\t\t\t\t<input \r\n\t\t\t\t\tclassName=\"searcher__search-term\" \r\n\t\t\t\t\ttype=\"text\" \r\n\t\t\t\t\tname=\"searchTerm\" \r\n\t\t\t\t\tplaceholder=\"Type in your search term\" \r\n\t\t\t\t\tonFocus={() => setFocus(true)}\r\n\t\t\t\t\tvalue={searchTerm}\r\n\t\t\t\t\tonChange={event => setSearchTerm(event.target.value)}\r\n\t\t\t\t/>\r\n\t\t\t</form>\r\n\t\t\t{hasFocus && searchResults.length > 0 && \r\n\t\t\t\t<div className=\"searcher__results\">\r\n\t\t\t\t\t{searchResults.map(result => \r\n\t\t\t\t\t\t<SearchResult \r\n\t\t\t\t\t\t\tkey={result.id} \r\n\t\t\t\t\t\t\ttvShow={result} \r\n\t\t\t\t\t\t\tonClick={() => setSearchResults([])}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { useAppContext } from '../../app-context/app-context';\r\n\r\nimport './error-modal.css';\r\n\r\nexport default function ErrorModal({ error }) {\r\n\tconst { setError } = useAppContext();\r\n\tconsole.error('App unexpected error:', error);\r\n\r\n\treturn (\r\n\t\t<div className=\"error-modal\">\r\n\t\t\t<div className=\"error-modal__veil\"></div>\r\n\t\t\t<div className=\"error-modal__modal\">\r\n\t\t\t\t<div className=\"error-modal__head\"></div>\r\n\t\t\t\t<div className=\"error-modal__content\">\r\n\t\t\t\t\t<p>Ouch! It has been a totally unexpected error. Please try again in a minute.</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"error-modal__footer\">\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tclassName=\"error-modal__close-button\"\r\n\t\t\t\t\t\tonClick={() => setError(null)}\r\n\t\t\t\t\t>Close</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useAppContext } from '../app-context/app-context';\r\nimport ThemeModeSwitch from './theme-mode-switch/theme-mode-switch';\r\nimport Searcher from './searcher/searcher';\r\nimport ErrorModal from '../shared/error-modal/error-modal';\r\n\r\nimport './layout-app.css';\r\n\r\nexport default function LayoutApp({ children }) {\r\n\tconst { error, themeMode } = useAppContext();\r\n\t\r\n\treturn (\r\n\t\t<div className=\"layout-app\" data-thememode={themeMode}>\r\n\t\t\t<header className=\"layout-app__header\">\r\n\t\t\t\t<section className=\"layout-app__title-container\">\r\n\t\t\t\t\t<Link className=\"layout-app__title\" to=\"/\">THE MOVIE DATABASE</Link>\r\n\t\t\t\t\t<ThemeModeSwitch />\r\n\t\t\t\t</section>\r\n\t\t\t\t<section className=\"layout-app__search-container\">\r\n\t\t\t\t\t<Searcher />\r\n\t\t\t\t</section>\r\n\t\t\t</header>\r\n\t\t\t<main className=\"layout-app__main\">{children}</main>\r\n\t\t\t{error && <ErrorModal error={error} />}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nexport default function ScrollToTop() {\r\n\tconst { pathname } = useLocation();\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.scroll({\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tbehavior: 'smooth'\r\n\t\t});\r\n\t}, [pathname]);\r\n\r\n\treturn null;\r\n}\r\n","import React, { Suspense } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\n\r\nimport buildLazyView from './plugins/lazy-view-builder';\r\n\r\nimport { AppProvider } from './components/app-context/app-context';\r\nimport Layout from './components/layout/layout-app';\r\nimport Loader from './components/shared/loader/loader';\r\nimport ScrollToTop from './components/shared/scroll-to-top/scroll-to-top';\r\n\r\nimport './App.css';\r\n\r\nconst HomeView = buildLazyView(() => import('./components/home/home-view'));\r\nconst TvShowDetailView = buildLazyView(() => import('./components/tvshow-detail/tvshow-detail-view'));\r\nconst SeasonDetailView = buildLazyView(() => import('./components/season-detail/season-detail-view'));\r\n\r\nlet basename = '/';\r\nif (process.env.NODE_ENV === 'production') {\r\n\tbasename = '/tmdb-front';\r\n}\r\n\r\nfunction App({ apiClient, userId, imagesConfig }) {\r\n\treturn (\r\n\t\t<AppProvider apiClient={apiClient} userId={userId} imagesConfig={imagesConfig}>\r\n\t\t\t<Router basename={basename}>\r\n\t\t\t\t<Suspense fallback={<Loader />}>\r\n\t\t\t\t\t<Layout>\r\n\t\t\t\t\t\t<ScrollToTop />\r\n\t\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t\t\t<Route path=\"/tvshow/:tvShowId/season/:seasonNumber\">\r\n\t\t\t\t\t\t\t\t\t<SeasonDetailView />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t<Route path=\"/tvshow/:tvShowId\">\r\n\t\t\t\t\t\t\t\t\t<TvShowDetailView />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t\t\t<Route path=\"/\" exact>\r\n\t\t\t\t\t\t\t\t\t<HomeView />\r\n\t\t\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t\t</Switch>\r\n\t\t\t\t\t</Layout>\r\n\t\t\t\t</Suspense>\r\n\t\t\t</Router>\r\n\t\t</AppProvider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import FetchQL from 'fetchql';\r\n\r\nclass ApiClient {\r\n\tconstructor({ apiUrl, userId }) {\r\n\t\tthis.client = new FetchQL({\r\n\t\t\turl: apiUrl, // GraphQL server address\r\n\t\t\tinterceptors: [],\r\n\t\t\theaders: { // customized headers of all requests,\r\n\t\t\t\tuserToken: userId\r\n\t\t\t},\r\n\t\t\tonStart: function (requestQueueLength) {}, // callback of a new request queue\r\n\t\t\tonEnd: function (requestQueueLength) {}, // callback of a request queue finished\r\n\t\t\tomitEmptyVariables: false // remove null props(null or '') from the variables\r\n\t\t});\r\n\t}\r\n\r\n\tsendQuery({ query, variables }) {\r\n\t\tconsole.log({ query, variables });\r\n\t\treturn this.client.query({ query, variables });\r\n\t}\r\n\r\n\tsendMutation({ mutation, variables }) {\r\n\t\treturn this.client.query({ query: mutation, variables });\r\n\t}\r\n\r\n\tcreateFragment(fragmentDefinition) {\r\n\t\treturn this.client.createFragment(fragmentDefinition);\r\n\t}\r\n}\r\n\r\nexport default ApiClient;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport ApiClient from './plugins/api-client';\r\n\r\nlet API_URL = 'http://localhost:4000';\r\nif (process.env.NODE_ENV === 'production') {\r\n\tAPI_URL = 'https://tmdb-graphql-api.herokuapp.com';\r\n}\r\n\r\nfunction getUserId() {\r\n\tlet userId = localStorage.getItem('ut');\r\n\r\n\tif (!userId) {\r\n\t\tuserId = btoa(Date.now());\r\n\t\tlocalStorage.setItem('ut', userId);\r\n\t}\r\n\t\r\n\treturn userId;\r\n}\r\n\r\nconst userId = getUserId();\r\n\r\nconst apiClient = new ApiClient({ apiUrl: API_URL, userId });\r\n\r\napiClient.sendQuery({ \r\n\tquery: `\r\n\t\tquery {\r\n\t\t\tgetImagesConfiguration {\r\n\t\t\t\tbaseUrl\r\n\t\t\t\tbackdropSizes\r\n\t\t\t\tlogoSizes\r\n\t\t\t\tposterSizes\r\n\t\t\t\tprofileSizes\r\n\t\t\t\tstillSizes\r\n\t\t\t}\r\n\t\t}\r\n\t`\r\n})\r\n.then(({ data: { getImagesConfiguration: imagesConfig } }) => {\r\n\tReactDOM.render(\r\n\t\t<App \r\n\t\t\tapiClient={apiClient} \r\n\t\t\tuserId={userId}\r\n\t\t\timagesConfig={imagesConfig}\r\n\t\t/>,\r\n\t\tdocument.getElementById('root')\r\n\t);\r\n})\r\n.catch(error => {\r\n\tconsole.error('Error loading images configuration.', error);\r\n});\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}